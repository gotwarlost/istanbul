// jQuery.scrollable, v1.2.0
// Copyright (c) 2015 Michael Heim, Zeilenwechsel.de
// Distributed under MIT license
// http://github.com/hashchange/jquery.scrollable


!function(a){"use strict";var b={},c={},d={},e={},f={};!function(b,c){function d(a){return a=c.normalizeContainer(a),b.getScrollable(a)}function e(a,d){return a=c.normalizeContainer(a),d=d?c.normalizeAxisName(d):c.BOTH_AXES,b.getScrollRange(a,d)}function f(a,d,e){e=c.normalizeOptions(e,d),a=c.normalizeContainer(a),d=c.normalizePosition(d,a,b.getScrollable(a),e),b.scrollTo(a,d,e)}function g(a,d){a=c.normalizeContainer(a),d=c.normalizeOptions(d),b.stopScroll(a,d)}function h(d,e,f,g){d=c.normalizeContainer(d),void 0===f||a.isArray(f)||(f=[f]),b.notifyScrollCallbacks(d,e,f,g)}function i(){return/iPad|iPhone|iPod/gi.test(navigator.userAgent)}a.fn.scrollable=function(){return d(this)},a.fn.scrollRange=function(a){return e(this,a)},a.fn.scrollTo=function(a,b){return f(this,a,b),this},a.fn.stopScroll=function(a){return g(this,a),this},a.fn.notifyScrollCallbacks=function(a,b,c){return h(this,a,b,c),this},a.scrollable={lockSpeedBelow:400,defaultDuration:a.fx.speeds._default,userScrollThreshold:10,_scrollDetectionThreshold:5,_enableUserScrollDetection:!i(),_enableClickAndTouchDetection:!0,_useScrollHistoryForDetection:i()}}(b,c),function(b,c,d){function e(b){var c;if(b&&b.notifyCancelled){if(!a.isPlainObject(b.notifyCancelled))throw new Error("Invalid notifyCancelled option. Expected a hash but got type "+a.type(b.notifyCancelled));c=a.extend({},b.notifyCancelled),delete b.notifyCancelled}return c}b.getScrollable=function(a){return d.getScrollable(a)},b.getScrollRange=function(a,b){return c.getScrollMaximum(a,b)},b.scrollTo=function(f,g,h){var i,j=e(h)||{};a.isWindow(f[0])&&(h=c.bindAnimationCallbacks(h,f[0])),c.isRedundantTarget(g,c.getScrollStartPosition(f,h))||(h.append?h._history=c.getLastStepHistory(f,h):(a.extend(j,{cancelled:h.merge?"merge":"replace"}),i=a.extend({notifyCancelled:j},h),h._history=b.stopScroll(f,i)),d.animateScroll(f,g,h))},b.stopScroll=function(a,d){var f=e(d),g=b.getScrollable(a);return c.stopScrollAnimation(g,d,f)},b.notifyScrollCallbacks=function(a,d,e,f){var g=b.getScrollable(a);c.notifyScrollCallbacks(g,d,e,f)}}(b,e,f),function(b,c,d){function e(d,e,g,h){var i=g.axis,k=j(d),l=k[b.HORIZONTAL],m=k[b.VERTICAL],n=i===b.VERTICAL,o=i===b.HORIZONTAL,p=a.extend({},g,{axis:b.HORIZONTAL}),q=a.extend({},g,{axis:b.VERTICAL}),r={};return r[b.HORIZONTAL]=n?g.merge?c.getLastTarget_QW(h,b.HORIZONTAL):b.IGNORE_AXIS:f(l,e,p,h)[b.HORIZONTAL],r[b.VERTICAL]=o?g.merge?c.getLastTarget_QW(h,b.VERTICAL):b.IGNORE_AXIS:f(m,e,q,h)[b.VERTICAL],r}function f(d,e,f,g){var i,j,l=d,m=0,n=1,o=f.axis,p=b.getScrollMode(f),q={};if(o!==b.HORIZONTAL&&o!==b.VERTICAL)throw new Error("Axis option not defined, or not defined unambiguously, with current value "+o);if(c.isString(d)){if(d=d.toLowerCase(),j=d.slice(0,2),("+="===j||"-="===j)&&(d=d.slice(2),n="+="===j?1:-1,m=c.getScrollStartPosition_QW(e,g,o,p)),"px"===d.slice(-2))d=parseFloat(d.slice(0,-2));else if("%"===d.slice(-1))d=parseFloat(d.slice(0,-1))*c.getScrollMaximum(e,o)/100;else if(o===b.HORIZONTAL){if("left"===d&&(d=0),"right"===d&&(d=c.getScrollMaximum(e,o)),"top"===d||"bottom"===d)throw new Error("Desired position "+d+"is inconsistent with axis option "+o)}else if("top"===d&&(d=0),"bottom"===d&&(d=c.getScrollMaximum(e,o)),"left"===d||"right"===d)throw new Error("Desired position "+d+"is inconsistent with axis option "+o);c.isString(d)&&a.isNumeric(d)&&(d=parseFloat(d))}if(c.isNumber(d))d=Math.round(m+n*d),q[o]=h(d,e,o);else{if(!k(d))throw new Error("Invalid position argument "+l);q[o]=p===b.MODE_MERGE?c.getLastTarget_QW(g,o):b.IGNORE_AXIS}return i=o===b.HORIZONTAL?b.VERTICAL:b.HORIZONTAL,q[i]=b.IGNORE_AXIS,q}function g(a){var c=a&&a.ignoreUser;if(c&&c!==!0&&c!==b.IGNORE_USER_SCROLL_ONLY&&c!==b.IGNORE_USER_CLICK_TOUCH_ONLY)throw new Error('Invalid ignoreUser option value "'+c+'"')}function h(a,b,d){return a=Math.min(a,c.getScrollMaximum(b,d)),a=Math.max(a,0)}function i(b){var c=void 0!==b.lockSpeedBelow?b.lockSpeedBelow:a.scrollable.lockSpeedBelow;return c=parseFloat(c),isNaN(c)?0:c}function j(d){var e={};return a.each(d,function(a,d){c.isInArray(a,o)?e[b.normalizeAxisName(a)]=d:"axis"===a?e[a]=b.normalizeAxisName(d):e[a]=d}),e}function k(a){return void 0===a||null===a||a===!1||""===a}var l=["v","y","top"],m=["h","x","left"],n=["vh","hv","xy","yx","all"],o=l.concat(m,n);b.VERTICAL="vertical",b.HORIZONTAL="horizontal",b.BOTH_AXES="both",b.IGNORE_AXIS=-999,b.defaults={_jqScrollable:!0,axis:b.VERTICAL,queue:"internal.jquery.scrollable",ignoreUser:!1},b.IGNORE_USER_SCROLL_ONLY="scroll",b.IGNORE_USER_CLICK_TOUCH_ONLY="click",b.MODE_REPLACE="replace",b.MODE_APPEND="append",b.MODE_MERGE="merge",b.normalizeContainer=function(b){var d=b[0],e=d&&d.tagName&&d.tagName.toLowerCase(),f="iframe"===e,g=!e||"html"===e||"body"===e;return g?a(c.ownerWindow(d)):f?a(d.contentWindow):b},b.normalizePosition=function(b,c,g,h){var i=new d.QueueWrapper(g,h.queue);return a.isPlainObject(b)?e(b,c,h,i):f(b,c,h,i)},b.normalizeOptions=function(d,e){var f,h,l=b.defaults.axis;return d=d?j(d):{},a.isPlainObject(e)?(e=j(e),f=!k(e[b.HORIZONTAL])&&e[b.HORIZONTAL]!==b.IGNORE_AXIS,h=!k(e[b.VERTICAL])&&e[b.VERTICAL]!==b.IGNORE_AXIS,l=f&&h?b.BOTH_AXES:f?b.HORIZONTAL:b.VERTICAL):c.isString(e)&&(e=e.toLowerCase(),"top"===e||"bottom"===e?l=b.VERTICAL:("left"===e||"right"===e)&&(l=b.HORIZONTAL)),d.lockSpeedBelow=i(d),g(d),a.extend({},b.defaults,{axis:l,duration:a.scrollable.defaultDuration},d)},b.normalizeAxisName=function(a){if(c.isInArray(a,l)?a=b.VERTICAL:c.isInArray(a,m)?a=b.HORIZONTAL:c.isInArray(a,n)&&(a=b.BOTH_AXES),a!==b.VERTICAL&&a!==b.HORIZONTAL&&a!==b.BOTH_AXES)throw new Error("Invalid axis name "+a);return a},b.getScrollMode=function(a){return a.append?b.MODE_APPEND:a.merge?b.MODE_MERGE:b.MODE_REPLACE}}(c,e,d),function(b,c,d){function e(b){return a.grep(a.map(b,function(b){return a.fn[b]}),function(a){return!!a})}function f(a){return c.isInArray(a,m)}function g(a){return a===d.defaults.queue&&"fx"!==a}function h(a){return c.isString(a)&&""!==a&&a!==d.defaults.queue&&"fx"!==a}var i=e(["fadeIn","fadeOut","fadeToggle","hide","show","slideDown","slideToggle","slideUp","toggle"]),j=e(["animate"]),k=e(["delay"]),l=e(["fadeTo"]),m=i.concat(j,k,l);b.QueueWrapper=function(a,b){this._$elem=a,this._queueName=void 0!==b?b:d.defaults.queue,this._isInternalCustomQueue=g(this._queueName),this._isOtherCustomQueue=h(this._queueName)},b.QueueWrapper.prototype.addToQueue=function(b){var d=b.func,e=b.args,g=this._$elem,h=this._queueName,l=function(a){a()};if(l.isSentinel=!0,b.info&&(l.info=b.info),f(d)){if(c.isInArray(d,i))a.extend(e[0],{queue:h});else if(c.isInArray(d,j))a.extend(e[1],{queue:h});else if(c.isInArray(d,k))e[1]=h;else if("fx"!==h)throw new Error("Can't use a custom queue (queue name: '"+h+"') with the provided animation function");d.apply(g,e)}else g.queue(h,function(a){d.apply(g,e),a()});g.queue(h,l),this._isInternalCustomQueue&&this.getContent()[1]===l&&g.dequeue(h)},b.QueueWrapper.prototype.getInfo=function(){var b=[],c=this.getContent();return a.each(c,function(a,c){c.isSentinel&&c.info&&b.push(c.info)}),b},b.QueueWrapper.prototype.getFirstInfo=function(){var a=this.getInfo();return a.length?a[0]:void 0},b.QueueWrapper.prototype.getLastInfo=function(){var a=this.getInfo(),b=a.length-1;return a.length?a[b]:void 0},b.QueueWrapper.prototype.getContent=function(){return this._$elem.queue(this._queueName)}}(d,e,c),function(b,c,d,e){function f(d,e){var f=d.queue,g=a.scrollable._enableUserScrollDetection&&d.ignoreUser!==!0&&d.ignoreUser!==c.IGNORE_USER_SCROLL_ONLY,h=void 0!==d.userScrollThreshold?parseInt(d.userScrollThreshold,10):a.scrollable.userScrollThreshold,j=a.scrollable._scrollDetectionThreshold,k=d.step,l=d?a.extend({},d):{},m={},n={scrollTop:0,scrollLeft:0};if(g){if(j>h)throw new Error("User scroll detection: threshold too low. The threshold for detecting user scroll movement must be set to at least "+j);l.step=function(c,d){var g=d.prop,l="scrollTop"===g?"scrollLeft":"scrollTop",o={},p={scrollTop:0,scrollLeft:0},q={scrollTop:!1,scrollLeft:!1};return o[g]=Math.floor(d.cur()),o[l]=Math.floor(d.elem[l]),void 0!==m[g]&&void 0!==m[l]&&(p[g]=m[g]-o[g],p[l]=m[l]-o[l],q[g]=Math.abs(p[g])>j,q[l]=Math.abs(p[l])>j,a.scrollable._useScrollHistoryForDetection&&(q[g]&&(q[g]=!i(g,o,e)),q[l]&&(q[l]=!i(l,o,e))),(q[g]||q[l])&&(n[g]+=p[g],n[l]+=p[l]),(Math.abs(n[g])>h||Math.abs(n[l])>h)&&(d.now=o[g],b.stopScrollAnimation(a(d.elem),{queue:f},{cancelled:"scroll"}))),m[g]=Math.floor(d.now),m[l]=o[l],a.scrollable._useScrollHistoryForDetection&&(e.real.push(o),e.expected.push(a.extend({},m)),e.real.length>6&&e.real.shift(),e.expected.length>6&&e.expected.shift()),k&&k.apply(this,a.makeArray(arguments))}}return l}function g(d,e){var f,g="mousedown touchstart pointerdown",h=a.scrollable._enableClickAndTouchDetection&&e.ignoreUser!==!0&&e.ignoreUser!==c.IGNORE_USER_CLICK_TOUCH_ONLY,i=e.queue,j=e.start,k=e.always,l=e?a.extend({},e):{},m="html"===d[0].tagName.toLowerCase()?a(d[0].ownerDocument.body):d;return h&&(f=function(){b.stopScrollAnimation(d,{queue:i},{cancelled:"click"})},l.start=function(){return m.on(g,f),j&&j.apply(this,a.makeArray(arguments))},l.always=function(){return m.off(g,f),k&&k.apply(this,a.makeArray(arguments))}),l}function h(c,d){var e=b.getExitCallbacks(c),f=c?a.extend({},c):{};return a.each(e,function(b,c){var e=d[b];f[b]=function(){var b=a.makeArray(arguments);1===b.length&&b.push(void 0),b.splice(2,0,e),c.apply(this,b)}}),f}function i(a,b,c){var d,e,f=!1,g=c.real.length,h=c.expected.length,i=b[a];for(d=g-1,e=6;d>=0&&e>=g-d&&!f;)f=i===c.real[d][a],d--;for(d=h-1,e=6;d>=0&&e>=h-d&&!f;)f=i===c.expected[d][a],d--;return f}function j(a,b){return k(new d.QueueWrapper(a,b.queue))}function k(a){var b=a.getFirstInfo();return b?b.history:void 0}function l(){var b={};return a.each(q,function(a,c){b[c]={}}),b}function m(a,b,c){return n(new d.QueueWrapper(a,b.queue),c)}function n(c,d){var e=[],f=c.getInfo(),g=a.map(f,function(a){return a.callbackMessages});return d||(d=q),a.each(d,function(c,d){if(!b.isInArray(d,q))throw new Error('Invalid animation callback name. Expected the name of an exit callback ("'+q.join('", "')+'"), but got "'+d+'"');a.each(g,function(a,b){e.push(b[d])})}),e}function o(a,d){var e=b.getCurrentScrollPosition(a),f=d[c.HORIZONTAL]===c.IGNORE_AXIS?0:d[c.HORIZONTAL]-e[c.HORIZONTAL],g=d[c.VERTICAL]===c.IGNORE_AXIS?0:d[c.VERTICAL]-e[c.VERTICAL];return Math.sqrt(Math.pow(f,2)+Math.pow(g,2))}function p(b,c){var d={};return b&&a.each(c,function(a,c){var e=b[c];void 0!==e&&(d[c]=e)}),d}var q=["complete","done","fail","always"],r=q.concat("start","step","progress");b.getScrollMaximum=function(d,e){var f,g,h,i=d[0],j=i.ownerDocument||i.document,k=a.isWindow(i);if(e===c.BOTH_AXES)f={},f[c.HORIZONTAL]=b.getScrollMaximum(d,c.HORIZONTAL),f[c.VERTICAL]=b.getScrollMaximum(d,c.VERTICAL);else{if(e===c.HORIZONTAL)g=k?a.windowWidth():i.clientWidth,h=k?a.documentWidth(j):i.scrollWidth;else{if(e!==c.VERTICAL)throw new Error("Unrecognized axis argument "+e);g=k?a.windowHeight():i.clientHeight,h=k?a.documentHeight(j):i.scrollHeight}f=Math.max(h-g,0)}return f},b.ownerWindow=function(b){var c=b instanceof a?b[0]:b,d=c&&(9===c.nodeType?c:c.ownerDocument);return d&&(d.defaultView||d.parentWindow)||a.isWindow(c)&&c||void 0},b.getCallbacks=function(a){return p(a,r)},b.getExitCallbacks=function(a){return p(a,q)},b.bindAnimationCallbacks=function(b,c){return b&&(b=a.extend({},b),a.each(r,function(d,e){b[e]&&(b[e]=a.proxy(b[e],c))})),b},b.addScrollAnimation=function(a,d,e){var i=d[c.HORIZONTAL],j=d[c.VERTICAL],k=i!==c.IGNORE_AXIS,m=j!==c.IGNORE_AXIS,n={},o=e._history||{real:[],expected:[]},p=l(),q={position:d,history:o,callbackMessages:p};e=f(e,o),e=g(a,e),e=h(e,p),k&&(n.scrollLeft=i),m&&(n.scrollTop=j),(k||m)&&b.addAnimation(a,n,e,q)},b.addAnimation=function(b,c,e,f){var g=new d.QueueWrapper(b,e.queue),h={func:a.fn.animate,args:[c,e],info:f};g.addToQueue(h)},b.stopScrollAnimation=function(c,d,e){var f;return d=a.extend({jumpToTargetPosition:!1},d),d.queue===!1?c.stop(!0,d.jumpToTargetPosition):(f=j(c,d),e&&b.notifyScrollCallbacks(c,e,q,d.queue),c.stop(d.queue,!0,d.jumpToTargetPosition)),f},b.notifyScrollCallbacks=function(b,c,d,e){var f=m(b,{queue:e},d);if(!a.isPlainObject(c))throw new Error("Invalid message argument. Expected a hash but got type "+a.type(c));a.each(f,function(b,d){a.extend(d,c)})},b.getScrollStartPosition=function(a,f,g){var h=new d.QueueWrapper(e.getScrollable(a),f.queue),i=c.getScrollMode(f);return b.getScrollStartPosition_QW(a,h,g,i)},b.getScrollStartPosition_QW=function(a,d,e,f){var g,h=f===c.MODE_APPEND,i=f===c.MODE_MERGE;return e||(e=c.BOTH_AXES),g=h||i?b.getLastTarget_QW(d,e):b.getCurrentScrollPosition(a,e),e===c.BOTH_AXES?(g[c.HORIZONTAL]===c.IGNORE_AXIS&&(g[c.HORIZONTAL]=b.getCurrentScrollPosition(a,c.HORIZONTAL)),g[c.VERTICAL]===c.IGNORE_AXIS&&(g[c.VERTICAL]=b.getCurrentScrollPosition(a,c.VERTICAL))):g===c.IGNORE_AXIS&&(g=b.getCurrentScrollPosition(a,e)),g},b.getLastStepHistory=function(a,c){return b.getLastStepHistory_QW(new d.QueueWrapper(e.getScrollable(a),c.queue))},b.getLastStepHistory_QW=function(a){var b=a.getLastInfo();return b?b.history:void 0},b.getLastTarget=function(a,c,f){return b.getLastTarget_QW(new d.QueueWrapper(e.getScrollable(a),c.queue),f)},b.getLastTarget_QW=function(b,d){var e,f,g=!d||d===c.BOTH_AXES,h={},i=b.getInfo();return h[c.HORIZONTAL]=h[c.VERTICAL]=c.IGNORE_AXIS,a.each(i,function(a,b){b.position&&(e=b.position[c.HORIZONTAL],f=b.position[c.VERTICAL],void 0!==e&&e!==c.IGNORE_AXIS&&(h[c.HORIZONTAL]=e),void 0!==f&&f!==c.IGNORE_AXIS&&(h[c.VERTICAL]=f))}),g?h:h[d]},b.isRedundantTarget=function(a,b){var d=a[c.HORIZONTAL],e=a[c.VERTICAL],f=b[c.HORIZONTAL],g=b[c.VERTICAL],h=d===c.IGNORE_AXIS||d===f,i=e===c.IGNORE_AXIS||e===g;return h&&i},b.getCurrentScrollPosition=function(a,b){var d={};return b&&b!==c.BOTH_AXES||(d[c.HORIZONTAL]=a.scrollLeft(),d[c.VERTICAL]=a.scrollTop()),b===c.HORIZONTAL?a.scrollLeft():b===c.VERTICAL?a.scrollTop():d},b.isString=function(a){return"string"==typeof a||a instanceof String},b.isNumber=function(a){return("number"==typeof a||a instanceof Number)&&!isNaN(a)},b.isInArray=function(b,c){return-1!==a.inArray(b,c)},a.Animation.prefilter(function(b,d,e){var f,g,h,i,j,k={},l=d&&"scrollLeft"in d,m=d&&"scrollTop"in d,n=d&&(l||m)&&e&&e._jqScrollable;n&&e.lockSpeedBelow&&(f=c.normalizeContainer(a(b)),k[c.HORIZONTAL]=l?d.scrollLeft:c.IGNORE_AXIS,k[c.VERTICAL]=m?d.scrollTop:c.IGNORE_AXIS,g=o(f,k),h=e.lockSpeedBelow,h>g&&(i=h/e.duration,j=g/i,this.duration=e.duration=Math.min(j,e.duration)))})}(e,c,d,f),function(b,c){function d(b){var c,d,g,h=(b||window).document;return"BackCompat"===h.compatMode?a(h.body):(f||(d=document.scrollingElement,g=d&&d.tagName,g&&g.toLowerCase&&(g=g.toLowerCase(),("html"===g||"body"===g)&&(f=g))),f||(c=e(),c.contentWindow.scrollTo(1,0),f=1===c.contentDocument.documentElement.scrollLeft?"html":"body",document.body.removeChild(c)),a("html"===f?h.documentElement:h.body))}function e(){var a=document.createElement("iframe"),b=document.body;return a.style.cssText="position: absolute; top: -600px; left: -600px; width: 500px; height: 500px; margin: 0px; padding: 0px; border: none; display: block;",a.frameborder="0",b.appendChild(a),a.src="about:blank",a.contentDocument.write('<!DOCTYPE html><html><head><meta charset="UTF-8"><title></title><style type="text/css">body { width: 550px; height: 1px; }</style></head><body></body></html>'),a}var f;b.getScrollable=function(b){return a.isWindow(b[0])?d(b[0]):b},b.animateScroll=function(a,d,e){var f=b.getScrollable(a);c.addScrollAnimation(f,d,e)},a(function(){void 0===f&&d()})}(f,e)}("undefined"!=typeof jQuery?jQuery:$);
//# sourceMappingURL=jquery.scrollable.min.js.map